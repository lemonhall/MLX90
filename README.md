# GYMCU90640 红外摄像头项目 (UART模式)

基于M5Stack CoreS3开发板的GYMCU90640红外摄像头项目，使用UART串口通信模式。

## 硬件要求

- M5Stack CoreS3 SE开发板
- GYMCU90640红外摄像头模块 (基于MLX90640芯片，支持UART+I2C双模式)
- 连接线

## 产品特性

- **芯片**: MLX90640红外温度传感器阵列
- **分辨率**: 32×24像素 (768个温度点)
- **温度范围**: -40°C ~ 300°C
- **精度**: ±1°C
- **视角**: 55°×35° (具体型号而定)
- **工作电压**: 3-5V
- **通信方式**: UART (TTL电平) + I2C (芯片本身)

## 接线说明

GYMCU90640 UART模式与M5Stack CoreS3的连接：

```
GYMCU90640  ->    M5Stack CoreS3
VIN         ->    3.3V
GND         ->    GND
TX          ->    GPIO 44 (GYMCU发送，S3接收)
RX          ->    GPIO 43 (GYMCU接收，S3发送，可选)
```

**注意**: 
- 当前代码支持3线连接模式 (VIN, GND, TX→G44)
- GYMCU90640支持多种波特率: 9600bps, 115200bps, 460800bps
- 支持连续输出与询问输出两种工作模式

## 功能特性

- 实时读取MLX90640红外摄像头数据
- 显示最大、最小和中心点温度
- 简单的热力图可视化
- 按钮交互控制

## 按钮功能

- **按钮A**: 读取并显示温度数据
- **按钮B**: 显示简单热力图

## 依赖库

- M5CoreS3 - M5Stack CoreS3开发板支持库

**注意**: UART模式不需要额外的MLX90640库，直接使用串口通信。

## 编译和上传

1. 安装PlatformIO
2. 克隆或下载此项目
3. 在PlatformIO中打开项目
4. 编译并上传到M5Stack CoreS3

```bash
pio run --target upload
```

## 串口监视器

```bash
pio device monitor
```

## 配置说明

可以在 `include/config.h` 中修改以下配置：

- I2C地址
- 显示参数
- 调试选项
- 热力图设置

## 故障排除

1. **找不到传感器**: 检查UART接线和电源供应
2. **读取失败**: 确认波特率设置和UART协议
3. **显示异常**: 检查M5Stack库版本兼容性
4. **数据解析错误**: 可能需要根据你的MLX90640 UART协议调整解析函数

## UART协议说明

GYMCU90640的UART特性：
- **默认波特率**: 9600bps
- **支持波特率**: 9600bps, 115200bps, 460800bps  
- **数据格式**: 8N1 (8位数据，无校验，1位停止)
- **工作模式**: 连续输出 或 询问输出
- **数据格式**: 可能包括十六进制、十进制等多种格式

**重要**: 当前代码会自动尝试不同波特率进行连接，并支持多种数据格式解析。

## 温度数据格式

MLX90640提供32x24像素的红外温度阵列，总共768个温度点。每个像素代表一个温度值（摄氏度）。

## 扩展功能

可以基于此项目扩展以下功能：

- 温度报警
- 数据记录
- WiFi数据传输
- 更复杂的图像处理算法
- 温度校准